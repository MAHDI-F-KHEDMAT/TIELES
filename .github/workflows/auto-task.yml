name: Automated Data Processing 

on:
  workflow_dispatch:
  schedule:
    - cron: '0 */12 * * *'

jobs:
  build:
    runs-on: ubuntu-latest
    
    permissions: # ğŸ‘ˆ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
      contents: write # ğŸ‘ˆ Ø§ÛŒÙ† Ø®Ø· Ù…Ø¬ÙˆØ² Ù†ÙˆØ´ØªÙ† Ø±Ø§ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
      # Ø§Ú¯Ø± Ø§Ø² GitHub Pages ÛŒØ§ Ø³Ø§ÛŒØ± ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ù‡ Ø®Ø·ÙˆØ· Ø¯ÛŒÚ¯Ø±ÛŒ Ù‡Ù… Ù†ÛŒØ§Ø² Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ØŒ
      # Ø§Ù…Ø§ Ø¨Ø±Ø§ÛŒ auto-commitØŒ 'contents: write' Ú©Ø§ÙÛŒ Ø§Ø³Øª.

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.x'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install requests

    - name: Run Data Processor 
      run: |
        python processor.py # Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ù†Ø§Ù… Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø§ÛŒØªÙˆÙ† Ø´Ù…Ø§ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…ÛŒÙ† "processor.py" Ø§Ø³Øª.

    - name: Commit and Push changes
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_user_name: GitHub Actions Bot
        commit_user_email: actions@github.com
        commit_author: GitHub Actions Bot <actions@github.com>
        commit_message: "Auto-update: Data processing results"
        file_pattern: 'data/*.txt'
